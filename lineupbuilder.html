<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://fonts.googleapis.com/css2?family=Cinzel+Decorative&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css" integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous">
    <title>MLB Lineup Creator</title>
    <style>
      /* Custom CSS for green background and black text */
      body {
        background-color: rgb(178, 226, 132);
        color: black;
      }

      .players-rectangle {
        overflow-y: scroll;
      }

      .lineup-slot {
        width: 500px;
        border: 2px solid black;
        height: 90px;
        display: flex;
        justify-content: center;
        align-items: center;
        }

      .player {
        width: 250px;
        height: 90px;
        background-color: #ccc;
        text-align: center;
        line-height: 90px;
        color: #fff;
        cursor: move;
        }

      .lineup-slot .player {
        width: 350px;
        height: 70px;
        text-align: center;
        }

        .fanatics{
        object-fit: contain;
        transform: rotate(90deg);
        height: 100px;
        width: 400px;
        position: absolute;
        left: 370px;
        top: 290px;
        }

    </style>
  </head>
  <body>
    <div class="container-fluid">
      <div class="row">
        <div class="col-3">
          <div class="dropdown my-3">
            <button class="btn btn-secondary dropdown-toggle" type="button" id="dropdownMenuButton" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
              Teams
            </button>
            <div class="dropdown-menu scrollable-menu" aria-labelledby="dropdownMenuButton">
            </div>
          </div>
          <button id="reset-button">Reset</button>
          <button id="download-button">Download</button>
          <div class="players-rectangle rectangle" style="background-color: #fcfcfc; height: 80vh; border: 4px solid black; margin-top: 35px;">
          </div>
        </div>
        <div class="col-6">
          <h2 class="text-center" style="text-shadow: 2px 2px #000000; background-color: #fcfcfc; font-family: 'Cinzel', cursive; font-size: 50px;">MLB LINEUP GENERATOR</h2>
          <div class="lineup-rectangle rectangle d-flex flex-column" style="background-color: #fcfcfc; height: 80vh; border: 4px solid black; margin-top: 50px;">
            <div class="lineup-slot"></div>
            <div class="lineup-slot"></div>
            <div class="lineup-slot"></div>
            <div class="lineup-slot"></div>
            <div class="lineup-slot"></div>
            <div class="lineup-slot"></div>
            <div class="lineup-slot"></div>
            <div class="lineup-slot"></div>
            <div class="lineup-slot"></div>
          </div>
        </div>
        <div class="col-3">
          <div class="stats-rectangle rectangle" style="background-color: #fcfcfc; height: 80vh; border: 4px solid black; margin-top: 87px;">
            
          </div>
        </div>
      </div>
    </div>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://code.jquery.com/ui/1.12.1/jquery-ui.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/0.5.0-beta4/html2canvas.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js" integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js" integrity="sha384-wfSDF2E50Y2D1uUdj0O3uMBJnjuUD4Ih7YwaYd1iqfktj0Uod8GCExl3Og8ifwB6" crossorigin="anonymous"></script>   
    <script>


        var data = {
        "Arizona Diamondbacks": {
            "name": "Arizona Diamondbacks",
            "players": [
                {"name": "Player 1", "stats": {"avg": .300, "WAR": 3.8}},
                {"name": "Player 2", "stats": {"avg": .300, "WAR": 3.8}}, 
                {"name": "Player 3", "stats": {"avg": .300, "WAR": 3.8
            }}, 
                {"name": "Player 4", "stats": {"avg": .300, "WAR": 3.8
            }}]
        },
        "Atlanta Braves": {
            "name": "Atlanta Braves",
            "players": [
                {"name": "Player 1", "stats": {"avg": .300, "WAR": 3.8
            }},
                {"name": "Player 2", "stats": {"avg": .300, "WAR": 3.8
            }}, 
                {"name": "Player 3", "stats": {"avg": .300, "WAR": 3.8
            }}, 
                {"name": "Player 4", "stats": {"avg": .300, "WAR": 3.8
            }}]
        },
        "Baltimore Orioles": {
            "name": "Baltimore Orioles",
            "players": [
                {"name": "Player 1", "stats": {"avg": .300, "WAR": 3.8
            }},
                {"name": "Player 2", "stats": {"avg": .300, "WAR": 3.8
            }}, 
                {"name": "Player 3", "stats": {"avg": .300, "WAR": 3.8
            }}, 
                {"name": "Player 4", "stats": {"avg": .300, "WAR": 3.8
            }}]
        },
        "Boston Red Sox": {
            "name": "Boston Red Sox",
            "players": [
                {"name": "Player 1", "stats": {"avg": .300, "WAR": 3.8
            }},
                {"name": "Player 2", "stats": {"avg": .300, "WAR": 3.8
            }}, 
                {"name": "Player 3", "stats": {"avg": .300, "WAR": 3.8
            }}, 
                {"name": "Player 4", "stats": {"avg": .300, "WAR": 3.8
            }}]
        },
        "Chicago Cubs": {
            "name": "Chicago Cubs",
            "players": [
                {"name": "Player 1", "stats": {"avg": .300, "WAR": 3.8
            }},
                {"name": "Player 2", "stats": {"avg": .300, "WAR": 3.8
            }}, 
                {"name": "Player 3", "stats": {"avg": .300, "WAR": 3.8
            }}, 
                {"name": "Player 4", "stats": {"avg": .300, "WAR": 3.8
            }}]
        },
        "Chicago White Sox": {
            "name": "Chicago White Sox",
            "players": [
                {"name": "Player 1", "stats": {"avg": .300, "WAR": 3.8
            }},
                {"name": "Player 2", "stats": {"avg": .300, "WAR": 3.8
            }}, 
                {"name": "Player 3", "stats": {"avg": .300, "WAR": 3.8
            }}, 
                {"name": "Player 4", "stats": {"avg": .300, "WAR": 3.8
            }}]
        },
        "Cincinnati Reds": {
            "name": "Cincinnati Reds",
            "players": [
                {"name": "Player 1", "stats": {"avg": .300, "WAR": 3.8
            }},
                {"name": "Player 2", "stats": {"avg": .300, "WAR": 3.8
            }}, 
                {"name": "Player 3", "stats": {"avg": .300, "WAR": 3.8
            }}, 
                {"name": "Player 4", "stats": {"avg": .300, "WAR": 3.8
            }}]
        },
        "Cleveland Indians": {
            "name": "Cleveland Indians",
            "players": [
                {"name": "Player 1", "stats": {"avg": .300, "WAR": 3.8
            }},
                {"name": "Player 2", "stats": {"avg": .300, "WAR": 3.8
            }}, 
                {"name": "Player 3", "stats": {"avg": .300, "WAR": 3.8
            }}, 
                {"name": "Player 4", "stats": {"avg": .300, "WAR": 3.8
            }}]
        },
        "Colorado Rockies": {
            "name": "Colorado Rockies",
            "players": [
                {"name": "Player 1", "stats": {"avg": .300, "WAR": 3.8
            }},
                {"name": "Player 2", "stats": {"avg": .300, "WAR": 3.8
            }}, 
                {"name": "Player 3", "stats": {"avg": .300, "WAR": 3.8
            }}, 
                {"name": "Player 4", "stats": {"avg": .300, "WAR": 3.8
            }}]
        },
        "Detroit Tigers": {
            "name": "Detroit Tigers",
            "players": [
                {"name": "Player 1", "stats": {"avg": .300, "WAR": 3.8
            }},
                {"name": "Player 2", "stats": {"avg": .300, "WAR": 3.8
            }}, 
                {"name": "Player 3", "stats": {"avg": .300, "WAR": 3.8
            }}, 
                {"name": "Player 4", "stats": {"avg": .300, "WAR": 3.8
            }}]
        },
        "Houston Astros": {
            "name": "Houston Astros",
            "players": [
                {"name": "Player 1", "stats": {"avg": .300, "WAR": 3.8
            }},
                {"name": "Player 2", "stats": {"avg": .300, "WAR": 3.8
            }}, 
                {"name": "Player 3", "stats": {"avg": .300, "WAR": 3.8
            }}, 
                {"name": "Player 4", "stats": {"avg": .300, "WAR": 3.8
            }}]
        },
        "Kansas City Royals": {
            "name": "Kansas City Royals",
            "players": [
                {"name": "Player 1", "stats": {"avg": .300, "WAR": 3.8
            }},
                {"name": "Player 2", "stats": {"avg": .300, "WAR": 3.8
            }}, 
                {"name": "Player 3", "stats": {"avg": .300, "WAR": 3.8
            }}, 
                {"name": "Player 4", "stats": {"avg": .300, "WAR": 3.8
            }}]
        },
        "Los Angeles Angels": {
            "name": "Los Angeles Angels",
            "players": [
                {"name": "Player 1", "stats": {"avg": .300, "WAR": 3.8
            }},
                {"name": "Player 2", "stats": {"avg": .300, "WAR": 3.8
            }}, 
                {"name": "Player 3", "stats": {"avg": .300, "WAR": 3.8
            }}, 
                {"name": "Player 4", "stats": {"avg": .300, "WAR": 3.8
            }}]
        },
        "Los Angeles Dodgers": {
            "name": "Los Angeles Dodgers",
            "players": [
                {"name": "Player 1", "stats": {"avg": .300, "WAR": 3.8
            }},
                {"name": "Player 2", "stats": {"avg": .300, "WAR": 3.8
            }}, 
                {"name": "Player 3", "stats": {"avg": .300, "WAR": 3.8
            }}, 
                {"name": "Player 4", "stats": {"avg": .300, "WAR": 3.8
            }}]
        },
        "Miami Marlins": {
            "name": "Miami Marlins",
            "players": [
                {"name": "Player 1", "stats": {"avg": .300, "WAR": 3.8
            }},
                {"name": "Player 2", "stats": {"avg": .300, "WAR": 3.8
            }}, 
                {"name": "Player 3", "stats": {"avg": .300, "WAR": 3.8
            }}, 
                {"name": "Player 4", "stats": {"avg": .300, "WAR": 3.8
            }}]
        },
        "Milwaukee Brewers": {
            "name": "Milwaukee Brewers",
            "players": [
                {"name": "Player 1", "stats": {"avg": .300, "WAR": 3.8
            }},
                {"name": "Player 2", "stats": {"avg": .300, "WAR": 3.8
            }}, 
                {"name": "Player 3", "stats": {"avg": .300, "WAR": 3.8
            }}, 
                {"name": "Player 4", "stats": {"avg": .300, "WAR": 3.8
            }}]
        },
        "Minnesota Twins": {
            "name": "Minnesota Twins",
            "players": [
                {"name": "Player 1", "stats": {"avg": .300, "WAR": 3.8
            }},
                {"name": "Player 2", "stats": {"avg": .300, "WAR": 3.8
            }}, 
                {"name": "Player 3", "stats": {"avg": .300, "WAR": 3.8
            }}, 
                {"name": "Player 4", "stats": {"avg": .300, "WAR": 3.8
            }}]
        },
        "New York Mets": {
            "name": "New York Mets",
            "players": [
                {"name": "Player 1", "stats": {"avg": .300, "WAR": 3.8
            }},
                {"name": "Player 2", "stats": {"avg": .300, "WAR": 3.8
            }}, 
                {"name": "Player 3", "stats": {"avg": .300, "WAR": 3.8
            }}, 
                {"name": "Player 4", "stats": {"avg": .300, "WAR": 3.8
            }}]
        },
        "New York Yankees": {
            "name": "New York Yankees",
            "players": [
                {"name": "Aaron Judge 99", "stats": {"avg": .311, "WAR": 10.4
            }},
                {"name": "Kyle Higashioka 66", "stats": {"avg": .300, "WAR": 3.8
            }}, 
                {"name": "Jose Trevino 39", "stats": {"avg": .300, "WAR": 3.8
            }}, 
                {"name": "Oswaldo Cabrera 95", "stats": {"avg": .300, "WAR": 3.8
            }},
                {"name": "Josh Donaldson 28", "stats": {"avg": .311, "WAR": 10.4
            }},
                {"name": "Isiah Kiner-Falefa 12", "stats": {"avg": .300, "WAR": 3.8
            }}, 
                {"name": "DJ LeMahieu 26", "stats": {"avg": .300, "WAR": 3.8
            }}, 
                {"name": "Oswald Peraza 91", "stats": {"avg": .300, "WAR": 3.8
            }},
                {"name": "Ben Rortvedt 38", "stats": {"avg": .311, "WAR": 10.4
            }},
                {"name": "Anthony Rizzo 48", "stats": {"avg": .300, "WAR": 3.8
            }}, 
                {"name": "Gleyber Torres 25", "stats": {"avg": .300, "WAR": 3.8
            }}, 
                {"name": "Harrison Bader 22", "stats": {"avg": .300, "WAR": 3.8
            }},
                {"name": "Estevan Florial 90", "stats": {"avg": .311, "WAR": 10.4
            }},
                {"name": "Aaron Hicks 31", "stats": {"avg": .300, "WAR": 3.8
            }}, 
                {"name": "Everson Pereira 93", "stats": {"avg": .300, "WAR": 3.8
            }}, 
                {"name": "Giancarlo Stanton 27", "stats": {"avg": .300, "WAR": 3.8
            }}]
        },
        "Oakland Athletics": {
            "name": "Oakland Athletics",
            "players": [
                {"name": "Player 1", "stats": {"avg": .300, "WAR": 3.8
            }},
                {"name": "Player 2", "stats": {"avg": .300, "WAR": 3.8
            }}, 
                {"name": "Player 3", "stats": {"avg": .300, "WAR": 3.8
            }}, 
                {"name": "Player 4", "stats": {"avg": .300, "WAR": 3.8
            }}]
        },
        "Philadelphia Phillies": {
            "name": "Philadelphia Phillies",
            "players": [
                {"name": "Player 1", "stats": {"avg": .300, "WAR": 3.8
            }},
                {"name": "Player 2", "stats": {"avg": .300, "WAR": 3.8
            }}, 
                {"name": "Player 3", "stats": {"avg": .300, "WAR": 3.8
            }}, 
                {"name": "Player 4", "stats": {"avg": .300, "WAR": 3.8
            }}]
        },
        "Pittsburgh Pirates": {
            "name": "Pittsburgh Pirates",
            "players": [
                {"name": "Player 1", "stats": {"avg": .300, "WAR": 3.8
            }},
                {"name": "Player 2", "stats": {"avg": .300, "WAR": 3.8
            }}, 
                {"name": "Player 3", "stats": {"avg": .300, "WAR": 3.8
            }}, 
                {"name": "Player 4", "stats": {"avg": .300, "WAR": 3.8
            }}]
        },
        "San Diego Padres": {
            "name": "San Diego Padres",
            "players": [
                {"name": "Player 1", "stats": {"avg": .300, "WAR": 3.8
            }},
                {"name": "Player 2", "stats": {"avg": .300, "WAR": 3.8
            }}, 
                {"name": "Player 3", "stats": {"avg": .300, "WAR": 3.8
            }}, 
                {"name": "Player 4", "stats": {"avg": .300, "WAR": 3.8
            }}]
        },
        "San Francisco Giants": {
            "name": "San Francisco Giants",
            "players": [
                {"name": "Player 1", "stats": {"avg": .300, "WAR": 3.8
            }},
                {"name": "Player 2", "stats": {"avg": .300, "WAR": 3.8
            }}, 
                {"name": "Player 3", "stats": {"avg": .300, "WAR": 3.8
            }}, 
                {"name": "Player 4", "stats": {"avg": .300, "WAR": 3.8
            }}]
        },
        "Seattle Mariners": {
            "name": "Seattle Mariners",
            "players": [
                {"name": "Player 1", "stats": {"avg": .300, "WAR": 3.8
            }},
                {"name": "Player 2", "stats": {"avg": .300, "WAR": 3.8
            }}, 
                {"name": "Player 3", "stats": {"avg": .300, "WAR": 3.8
            }}, 
                {"name": "Player 4", "stats": {"avg": .300, "WAR": 3.8
            }}]
        },
        "St. Louis Cardinals": {
            "name": "St. Louis Cardinals",
            "players": [
                {"name": "Player 1", "stats": {"avg": .300, "WAR": 3.8
            }},
                {"name": "Player 2", "stats": {"avg": .300, "WAR": 3.8
            }}, 
                {"name": "Player 3", "stats": {"avg": .300, "WAR": 3.8
            }}, 
                {"name": "Player 4", "stats": {"avg": .300, "WAR": 3.8
            }}]
        },
        "Tampa Bay Rays": {
            "name": "Tampa Bay Rays",
            "players": [
                {"name": "Player 1", "stats": {"avg": .300, "WAR": 3.8
            }},
                {"name": "Player 2", "stats": {"avg": .300, "WAR": 3.8
            }}, 
                {"name": "Player 3", "stats": {"avg": .300, "WAR": 3.8
            }}, 
                {"name": "Player 4", "stats": {"avg": .300, "WAR": 3.8
            }}]
        },
        "Texas Rangers": {
            "name": "Texas Rangers",
            "players": [
                {"name": "Player 1", "stats": {"avg": .300, "WAR": 3.8
            }},
                {"name": "Player 2", "stats": {"avg": .300, "WAR": 3.8
            }}, 
                {"name": "Player 3", "stats": {"avg": .300, "WAR": 3.8
            }}, 
                {"name": "Player 4", "stats": {"avg": .300, "WAR": 3.8
            }}]
        },
        "Toronto Blue Jays": {
            "name": "Toronto Blue Jays",
            "players": [
                {"name": "Player 1", "stats": {"avg": .300, "WAR": 3.8
            }},
                {"name": "Player 2", "stats": {"avg": .300, "WAR": 3.8
            }}, 
                {"name": "Player 3", "stats": {"avg": .300, "WAR": 3.8
            }}, 
                {"name": "Player 4", "stats": {"avg": .300, "WAR": 3.8
            }}]
        },
        "Washington Nationals": {
            "name": "Washington Nationals",
            "players": [
                {"name": "Player 1", "stats": {"avg": .300, "WAR": 3.8
            }},
                {"name": "Player 2", "stats": {"avg": .300, "WAR": 3.8
            }}, 
                {"name": "Player 3", "stats": {"avg": .300, "WAR": 3.8
            }}, 
                {"name": "Player 4", "stats": {"avg": .300, "WAR": 3.8
            }}]
        }
    };

    var teamColorsData = {
    "Arizona Diamondbacks": ["#A71930", "#000000"],
    "Atlanta Braves": ["#13274F", "#CE1141"],
    "Baltimore Orioles": ["#DF4601", "#000000"],
    "Boston Red Sox": ["#C60C30", "#FFFFFF"],
    "Chicago Cubs": ["#0E3386", "#CC3433"],
    "Chicago White Sox": ["#000000", "#C4CED4"],
    "Cincinnati Reds": ["#C6011F", "#000000"],
    "Cleveland Indians": ["#E31937", "#000000"],
    "Colorado Rockies": ["#333366", "#C4CED4"],
    "Detroit Tigers": ["#0C2340", "#F2DCDE"],
    "Houston Astros": ["#EB6E1F", "#002D62"],
    "Kansas City Royals": ["#004687", "#C09A5B"],
    "Los Angeles Angels": ["#BA0021", "#003263"],
    "Los Angeles Dodgers": ["#005A9C", "#FFFFFF"],
    "Miami Marlins": ["#0077C8", "#F9423A"],
    "Milwaukee Brewers": ["#0A2351", "#B6922E"],
    "Minnesota Twins": ["#002B5C", "#D31145"],
    "New York Mets": ["#002D72", "#DF4601"],
    "New York Yankees": ["#002D72", "#FFFFFF"],
    "Oakland Athletics": ["#003831", "#EFB21E"],
    "Philadelphia Phillies": ["#E81828", "#FFFFFF"],
    "Pittsburgh Pirates": ["#FDB827", "#000000"],
    "San Diego Padres": ["#2F241D", "#FEC325"],
    "San Francisco Giants": ["#FD5A1E", "#000000"],
    "Seattle Mariners": ["#0C2C56", "#005C5C"],
    "St. Louis Cardinals": ["#C41E3A", "#FFFFFF"],
    "Tampa Bay Rays": ["#092C5C", "#8FBCE6"],
    "Texas Rangers": ["#BD3039", "#FFFFFF"],
    "Toronto Blue Jays": ["#134A8E", "#1D2D5C"],
    "Washington Nationals": ["#AB0003", "#BA122B"]
    };

    // Select the dropdown menu element
    var dropdown = $('.dropdown-menu');

    let selectedTeamName;

    // Iterate over the teams in the data object
    for (var team in data) {
        var teamName = data[team].name;
        // Create a new option element
        var option = $('<a>', {
            class: "dropdown-item",
            href: "#",
            text: teamName
        });
        // Add the option element to the dropdown menu
        dropdown.append(option);
    }


    // Get the players-rectangle element
    var playersRectangle = document.querySelector('.players-rectangle');
    // Add a dragover event listener to the players-rectangle
    playersRectangle.addEventListener('dragover', function(event) {
        event.preventDefault();
    });

    // Add a drop event listener to the players-rectangle
    playersRectangle.addEventListener('drop', function(event) {
        event.preventDefault();
        var playerId = event.dataTransfer.getData("text");
        var player = document.getElementById(playerId);
        playersRectangle.appendChild(player);
    });

    // Get the stats-rectangle element
    var statsRectangle = document.querySelector('.stats-rectangle');

    // Add a global playerId variable
    let playerId;

    // Declare the teamPlayers variable outside of the click event listener
    let teamPlayers;

    // Add a click event listener to each team option in the dropdown menu
    var teamOptions = document.querySelectorAll('.dropdown-item');
    teamOptions.forEach(function(option) {
        option.addEventListener('click', function() {
            selectedTeamName = this.innerHTML;
            var teamPlayers = data[selectedTeamName].players;
            var teamColors = teamColorsData[selectedTeamName];

            // Clear the players-rectangle
            playersRectangle.innerHTML = '';

            // Clear all the lineup slots
            var lineupSlots = document.querySelectorAll('.lineup-slot');
            lineupSlots.forEach(function(slot) {
                slot.innerHTML = '';
            });

            // Iterate over the players in the selected team

            for (var i = 0; i < teamPlayers.length; i++) {
                var player = teamPlayers[i];
                var playerName = player.name;

                // Create a new div element for the player
                (function(){
                    var playerDiv = document.createElement('div');
                    playerDiv.classList.add("player", "lineup-player");
                    playerDiv.innerHTML = playerName;
                    playerDiv.style.backgroundColor = teamColors[0];
                    playerDiv.style.color = teamColors[1];
                    playerDiv.setAttribute("draggable", "true");
                    playerDiv.id = playerName;
                    playerDiv.addEventListener("dragstart", function(event) {
                        event.dataTransfer.setData("text", event.target.id);
                    });
                    playerDiv.addEventListener("dragover", function(event) {
                        event.preventDefault();
                    });
                    playerDiv.addEventListener("drop", function(event) {
                        event.preventDefault();
                        lineupRectangle.appendChild(playerDiv);
                    });

                    // Add the player div to the players-rectangle
                    playersRectangle.appendChild(playerDiv);
                })();
            }

        });
    });

    

    var lineupSlots = document.querySelectorAll(".lineup-slot");
    // Add a dragover event listener to each lineup slot
    lineupSlots.forEach(function(slot) {
        slot.addEventListener('dragover', function(event) {
            event.preventDefault();
        });
        // Add a drop event listener to each lineup slot
        slot.addEventListener('drop', function(event) {
            event.preventDefault();
            var playerId = event.dataTransfer.getData("text");
            console.log(playerId);
            var player = document.getElementById(playerId);
            console.log(player);
            if (slot.childNodes.length === 0) {
                slot.appendChild(player);

            // Clear the stats-rectangle
            statsRectangle.innerHTML = '';

            // Get all the players in the lineup-rectangle
            var lineupPlayers = document.querySelectorAll('.lineup-slot .player');

            // Initialize variables to store the total WAR and AVG
            var totalWAR = 0;
            var totalAVG = 0;

            // Iterate over the players in the lineup-rectangle
            for (var i = 0; i < lineupPlayers.length; i++) {
                var playerName = lineupPlayers[i].innerHTML;
                var player = data[selectedTeamName].players.find(function(p) {
                    return p.name === playerName;
                });

                // Add the player's WAR and AVG to the total
                if (player.hasOwnProperty("stats")) {
                    totalWAR += player.stats.WAR;
                    totalAVG += player.stats.avg;
                }
            }

            console.log(player.name, player.stats);

            // Create a new p element to display the total WAR
            var warP = document.createElement('p');
            warP.innerHTML = 'Total WAR: ' + totalWAR;
            statsRectangle.appendChild(warP);

            // Create a new p element to display the average AVG
            var avgP = document.createElement('p');
            avgP.innerHTML = 'Avg AVG: ' + (totalAVG / lineupPlayers.length).toFixed(3);
            statsRectangle.appendChild(avgP);


            }
        });
    });
    
    var lineupRectangle = document.querySelector(".lineup-rectangle");
    lineupRectangle.addEventListener("dragover", function(event) {
        event.preventDefault();
    });
    lineupRectangle.addEventListener("drop", function(event) {
        event.preventDefault();
        var playerId = event.dataTransfer.getData("text");
        var playerElement = document.getElementById(playerId);
        if (event.target.children.length === 0) {
        event.target.appendChild(player);
        player.classList.add("lineup-player");
        }
    });


    // Check if the player is already present in the lineup-rectangle
    var existingPlayer = lineupRectangle.querySelector('#' + playerId);
    if (existingPlayer) {
        lineupRectangle.replaceChild(playerDiv, existingPlayer);
    } else {
        null
    }

    // Get the reset button
    var resetButton = document.getElementById("reset-button");

    // Add a click event listener to the reset button
resetButton.addEventListener("click", function() {
    // Get all the players in the lineup rectangle
    var players = document.querySelectorAll(".lineup-rectangle .player");

    // Loop through each player
    for (var i = 0; i < players.length; i++) {
        // Get the player
        var player = players[i];

        // Remove the player from the lineup rectangle
        player.remove();

        // Get the players rectangle
        var playersRectangle = document.querySelector(".players-rectangle");

        // Append the player to the players rectangle
        playersRectangle.appendChild(player);
    }
});



    // Get the download button
    var downloadButton = document.getElementById("download-button");

    // Add a click event listener to the download button
    downloadButton.addEventListener("click", function() {
    // Create a new canvas element
    var canvas = document.createElement("canvas");

    // Get the lineup rectangle
    var lineupRectangle = document.querySelector(".lineup-rectangle");

    // Set the canvas dimensions to match the lineup rectangle
    canvas.width = lineupRectangle.offsetWidth;
    canvas.height = lineupRectangle.offsetHeight;

    // Get the canvas 2D context
    var ctx = canvas.getContext("2d");

    // Create a new image element
    var img = new Image();

    html2canvas(lineupRectangle, {}).then(function(canvas) {
    img.src = canvas.toDataURL();
    });

    // Draw the image on the canvas
    img.onload = function() {
        ctx.drawImage(img, 0, 0);

    

    // Convert the canvas to a data URL
    var dataURL = canvas.toDataURL();

    // Create a new link element
    var link = document.createElement("a");

    // Set the link's href to the data URL
    link.href = dataURL;

    // Set the link's download attribute to "lineup.png"
    link.download = "lineup.png";

    // Append the link to the body
    document.body.appendChild(link);

    // Click the link
    link.click();

    // Remove the link
    link.remove();
};
});


    </script>
  </body>
</html>
